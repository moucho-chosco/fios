<!DOCTYPE html>
<html lang="gl">
<head>
	<meta name="generator" content="Hugo 0.143.1"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fios | Principal</title>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/mobil.css">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="/scripts/functions.js"></script>
    <script src="/scripts/normativa.js"></script>
</head>
<body id="body" style="visibility: hidden;">
    <div class="container-columna">
        <div class="container-fila">
            
            <aside class="sidebar-container">
                <div class="sidebar-container">
    <div class="sidebar">
        <div class="logo">
            <img id="logo" src="/images/logo.svg" alt="Logo do sitio">
        </div>

        <nav>
            <ul id="menu-pages-list">
                
                
                <li class="active">
                    <a href="/ilg/" class="menu-link">
                        
                            <img class="menu-icon negativo" src="/images/elementos/pantalla_ancha/principal_negativo.svg" alt=" Principal" />
                        
                        <img class="menu-icon reduced-icon" src="/images/elementos/pantalla_ancha/principal.svg" alt=" Principal" />
                        <span class="menu-text"> Principal</span>
                    </a>
                </li>
                
                
                <li class="">
                    <a href="/ilg/biblioteca/" class="menu-link">
                        
                            <img class="menu-icon positivo" src="/images/elementos/pantalla_ancha/biblioteca.svg" alt=" Biblioteca" />
                        
                        <img class="menu-icon reduced-icon" src="/images/elementos/pantalla_ancha/biblioteca.svg" alt=" Biblioteca" />
                        <span class="menu-text"> Biblioteca</span>
                    </a>
                </li>
                
                
                <li class="">
                    <a href="/ilg/organizacion/" class="menu-link">
                        
                            <img class="menu-icon positivo" src="/images/elementos/pantalla_ancha/organizacions.svg" alt=" Organización" />
                        
                        <img class="menu-icon reduced-icon" src="/images/elementos/pantalla_ancha/organizacions.svg" alt=" Organización" />
                        <span class="menu-text"> Organización</span>
                    </a>
                </li>
                
                
                <li class="">
                    <a href="/ilg/espazos/" class="menu-link">
                        
                            <img class="menu-icon positivo" src="/images/elementos/pantalla_ancha/espazos.svg" alt=" Espazos" />
                        
                        <img class="menu-icon reduced-icon" src="/images/elementos/pantalla_ancha/espazos.svg" alt=" Espazos" />
                        <span class="menu-text"> Espazos</span>
                    </a>
                </li>
                
                
                <li class="">
                    <a href="/ilg/podcast/" class="menu-link">
                        
                            <img class="menu-icon positivo" src="/images/elementos/pantalla_ancha/podcast.svg" alt=" Podcast" />
                        
                        <img class="menu-icon reduced-icon" src="/images/elementos/pantalla_ancha/podcast.svg" alt=" Podcast" />
                        <span class="menu-text"> Podcast</span>
                    </a>
                </li>
                
                
                <li class="">
                    <a href="/ilg/recursos/" class="menu-link">
                        
                            <img class="menu-icon positivo" src="/images/elementos/pantalla_ancha/recursos.svg" alt=" Recursos" />
                        
                        <img class="menu-icon reduced-icon" src="/images/elementos/pantalla_ancha/recursos.svg" alt=" Recursos" />
                        <span class="menu-text"> Recursos</span>
                    </a>
                </li>
                
            </ul>

            <nav id="langSwitcher">
                
                
                
                    
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
                
                    
                    
                        <a href="/agal/" id="langButton" class="normativa-button">
                        
                            <img class="lang-icon" src="/images/elementos/pantalla_ancha/enhe.png" alt="Normativa ILG" width="25" height="25">
                        
                        </a>
                    
                
                    
                    
                
            </nav>
            
            
            <button class="toggle-button" onclick="toggleSidebar()"> 
                <img src="/images/elementos/frecha_atras_negra.svg" alt="Frecha atrás" width="16" height="16">
                contraer
            </button>
        </nav>
    </div>
</div>

            </aside>
            
            
            <main class="content">
                
  <div id="principal-container" class="standard-section-container">
    
    
    <div class="caixas-container">
      <div class="fila primeira-fila">
        <div class="caixa window banner-principal">
          <div class="infofios-principal" id="infofios1">
            <p class="titulo-principal">
              Espazo divulgativo<br>
              do común
            </p>

            <p class="texto-principal">
              Tecendo un espazo común de aprendizaxe,<br>conexión e loita. Unha fiestra aberta ás<br>militancias anticapitalistas.
            </p>
          </div>
          <img src="/images/banners/principal/banner_fios.png" alt="Imaxe" class="imaxe-dereita">
        </div>
        <div class="caixa window">Espazos</div>
      </div>
      <div class="fila segunda-fila">
        <div class="caixa window">
          <div class="colectiva-aleatoria">
            <div id="colectiva-aleatoria-content">
            </div>
            <button class="ver-mais" id="ver-mais-principal">Ver colectivas</button>
          </div>
        
          <script>
            
            fetch('/colectivas.json')
              .then(response => response.json())
              .then(data => {
                const colectivas = data.colectivas;
                console.log(colectivas);
                if (colectivas.length > 0) {
                  
                  const colectivaAleatoria = colectivas[Math.floor(Math.random() * colectivas.length)];
          
                  
                  const colectivaContent = document.getElementById('colectiva-aleatoria-content');
                  colectivaContent.innerHTML = `
                    <div class="colectiva-info">
                      <img src="${colectivaAleatoria.logo}" alt="Logo de ${colectivaAleatoria.title}" class="logo-principal">
                      <div class="texto">
                        <h2>${colectivaAleatoria.title}</h2>
                        <h3>${colectivaAleatoria.description || "Descrición"}</h3>
                        <p>${colectivaAleatoria.info}</p>
                      </div>
                    </div>
                  `;
                } else {
                  document.getElementById('colectiva-content').innerHTML = '<p>Non se atoparon colectivas.</p>';
                }
              })
              .catch(error => {
                console.error('Error ao cargar as colectivas:', error);
                document.getElementById('colectiva-aleatoria-content').innerHTML = '<p>Erro ao cargar as colectivas.</p>';
              });
          </script>
        </div>
        <div class="caixa window">Convocatorias</div>
        <div class="caixa window">
          <div class="espazo-aleatorio">
            <div id="espazo-content">
            </div>
            <button class="ver-mais" id="ver-mais-principal">Ver espazos</button>
          </div>
        
          <script>
            
            fetch('/espazos.json')
              .then(response => response.json())
              .then(data => {
                const espazos = data.espazos;
                if (espazos.length > 0) {
                  
                  const espazoAleatorio = espazos[Math.floor(Math.random() * espazos.length)];
          
                  
                  const espazoContent = document.getElementById('espazo-content');
                  espazoContent.innerHTML = `
                    <div class="espazo-info">
                      <img src="${espazoAleatorio.logo}" alt="Logo de ${espazoAleatorio.title}" class="logo-principal">
                      <div class="texto">
                        <h2>${espazoAleatorio.title}</h2>
                        <h3>${espazoAleatorio.description || "Descrición"} en ${espazoAleatorio.localidade || "Localidade"}</h3>
                        <p>${espazoAleatorio.info}</p>
                      </div>
                    </div>
                  `;
                } else {
                  document.getElementById('espazo-content').innerHTML = '<p>Non se atoparon espazos.</p>';
                }
              })
              .catch(error => {
                console.error('Error ao cargar os espazos:', error);
                document.getElementById('espazo-content').innerHTML = '<p>Erro ao cargar os espazos.</p>';
              });
          </script>

        </div>
      </div>
      <div class="fila terceira-fila">
        <div class="caixa grande window">
          <div class="biblioteca-aleatoria">
            <div id="biblioteca-content">
              
              <div class="loading-indicator">
                <div class="loader"></div>
              </div>
            </div>
            <button class="ver-mais" id="ver-biblioteca-completa">Ver biblioteca completa</button>
          </div>
        
          <script>
            
            function loadRandomLibraryCarousel() {
              
              const bibliotecaPage = {"categorias":[{"nome":"Anarquismo","subcategorias":["Achegamento ao anarquismo","Historia do anarquismo","Anticapacitismo e anarquismo","Insurreccionalismo","Anarcosindicalismo"]},{"nome":"Anticapacitismo","subcategorias":["Anarquismo e anticapacitismo","Discapacidade e disidencia"]},{"nome":"Análise do capitalismo?","subcategorias":[null]},{"nome":"Colonialismo e imperialismo","subcategorias":["Achegamento ao decolonialismo e antiimperialismo","Desenvolvemento desigual","Panafricanismo","Palestina","América Latina"]},{"nome":"Comunismo","subcategorias":["Achegamento ao marxismo","Filosofía marxista: Materialismo dialéctico","Crítica da economía política","Historia do Movemento Obreiro/Proletario","Teoria crítica / Comunismo actual a debate","Marxismo e género","Marxismo e cuestión nacional","Ecosocialismo","Imperialismo","Marxismo e vaga reaccionaria"]},{"nome":"Crise climática","subcategorias":["Xustiza climática","Capitalismo e clima","Ciencia e clima","Decrecemento","Defensa da terra","Ecosocialismo","Ecofeminismo"]},{"nome":"Ética animal","subcategorias":["Liberación animal","Veganismo negro","Ética animal e feminismo","Ética animal e comunismo"]},{"nome":"Independentismo e cuestión nacional","subcategorias":["Dereito e autodeterminación","Historia do independentismo galego"]},{"nome":"Xénero","subcategorias":["Achegamento a cuestión do xenero","Historia da loita feminista e LGBT+","Gordofobia e xénero","Anarquismo e xénero","Marxismo e xénero","Feminismo materialista","Feminismo postestructuralista","Primeira onda do feminismo","Segunda onda do feminismo","Terceira onda do feminismo","Ecofeminismo","Teoría LGBTIQ+","Xénero e antirracismo"]},{"nome":"Práctica militante","subcategorias":["Antirrepresión","Ciberseguridade","Coidados na militancia","Protocolos"]}],"date":"2024-11-18T18:16:40+01:00","draft":false,"iscjklanguage":false,"lang":"rag","lastmod":"2024-11-18T18:16:40+01:00","publishdate":"2024-11-18T18:16:40+01:00","title":"fios | Biblioteca"};
              console.log("Datos da biblioteca:", bibliotecaPage); 
              
              console.log("Categorias:", bibliotecaPage.categorias);
              console.log("Cantidade:", bibliotecaPage.categorias.length);
              
              if (!bibliotecaPage.categorias || bibliotecaPage.categorias.length === 0) {
                
                showNoCategoriesMessage();
                return;
              }
              
              
              const categoriaAleatoria = bibliotecaPage.categorias[
                Math.floor(Math.random() * bibliotecaPage.categorias.length)
              ];
              
              
              if (!categoriaAleatoria.subcategorias || categoriaAleatoria.subcategorias.length === 0) {
                showNoSubcategoriesMessage(categoriaAleatoria.nome);
                return;
              }
              
              const subcategoriaAleatoria = categoriaAleatoria.subcategorias[
                Math.floor(Math.random() * categoriaAleatoria.subcategorias.length)
              ];
              
              
              fetch('/obras.json')
                .then(response => response.json())
                .then(obrasData => {
                  const librosSubcategoria = obrasData.libros.filter(libro => 
                    libro.subcategorias && libro.subcategorias.includes(subcategoriaAleatoria)
                  );
                  
                  if (librosSubcategoria.length > 0) {
                    
                    shuffleArray(librosSubcategoria);
                    
                    
                    renderRandomCarousel(subcategoriaAleatoria, librosSubcategoria.slice(0, 6));
                  } else {
                    showNoBooksMessage(subcategoriaAleatoria);
                  }
                })
                .catch(error => {
                  console.error('Error:', error);
                  showLibraryError();
                });
            }
        
            
            function renderRandomCarousel(subcategoria, libros) {
              const container = document.getElementById('biblioteca-content');
              container.innerHTML = `
                <div class="random-carousel">
                  <h3>${subcategoria}</h3>
                  <div class="carousel-container">
                    <div class="carousel-track">
                      ${libros.map(libro => `
                        <div class="libro-pequeno">
                          <img src="${libro.portada || '/images/default-book-cover.jpg'}" alt="${libro.titulo}" loading="lazy">
                          <h4>${libro.titulo}</h4>
                          <p class="autor">${libro.autores ? libro.autores.join(', ') : 'Autor descoñecido'}</p>
                        </div>
                      `).join('')}
                    </div>
                    <button class="carousel-prev">&#10094;</button>
                    <button class="carousel-next">&#10095;</button>
                  </div>
                </div>
              `;
              
              
              setupMiniCarousel();
            }
        
            
            function shuffleArray(array) {
              for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
              }
              return array;
            }
        
            function setupMiniCarousel() {
              const carousel = document.querySelector('.random-carousel .carousel-container');
              if (!carousel) return;
              
              const track = carousel.querySelector('.carousel-track');
              const prev = carousel.querySelector('.carousel-prev');
              const next = carousel.querySelector('.carousel-next');
              
              let position = 0;
              const itemWidth = 150;
              
              next.addEventListener('click', () => {
                position = Math.min(position + itemWidth * 2, track.scrollWidth - carousel.clientWidth);
                track.style.transform = `translateX(-${position}px)`;
              });
              
              prev.addEventListener('click', () => {
                position = Math.max(position - itemWidth * 2, 0);
                track.style.transform = `translateX(-${position}px)`;
              });
            }
        
            function showNoCategoriesMessage() {
              document.getElementById('biblioteca-content').innerHTML = `
                <p class="info-message">Non se atoparon categorías na biblioteca.</p>
              `;
            }
        
            function showNoSubcategoriesMessage(categoria) {
              document.getElementById('biblioteca-content').innerHTML = `
                <p class="info-message">A categoría "${categoria}" non ten subcategorías.</p>
              `;
            }
        
            function showNoBooksMessage(subcategoria) {
              document.getElementById('biblioteca-content').innerHTML = `
                <p class="info-message">Non se atoparon libros para "${subcategoria}".</p>
              `;
            }
        
            function showLibraryError() {
              document.getElementById('biblioteca-content').innerHTML = `
                <p class="error-message">Erro ao cargar a biblioteca. <a href="javascript:loadRandomLibraryCarousel()">Tentar de novo</a></p>
              `;
            }
        
            
            loadRandomLibraryCarousel();
        
            
            document.getElementById('ver-biblioteca-completa').addEventListener('click', () => {
              window.location.href = '/biblioteca';
            });
          </script>
        </div>
        <div class="caixa pequena window">Podcast</div>
      </div>
    </div>
  </div>
  <div id="custom-scrollbar">
    <div id="scrollbar-thumb"></div>
  </div>

            </main>
        </div>
        <aside class="sidebar-mobil-container">
            <div class="sidebar-mobil-container">
    <nav>
        <ul class="menu-mobil">
            
                <li class="">
                    <a href="/ilg/organizacion/" class="menu-link">
                        <span class="menu-icon">
                            <img src="/images/elementos/pantalla_estreita/organizacions.svg" alt=" Organización" />
                        </span>
                    </a>
                </li>
            
                <li class="">
                    <a href="/ilg/biblioteca/" class="menu-link">
                        <span class="menu-icon">
                            <img src="/images/elementos/pantalla_estreita/biblioteca.svg" alt=" Biblioteca" />
                        </span>
                    </a>
                </li>
            
                <li class="active">
                    <a href="/ilg/" class="menu-link">
                        <span class="menu-icon">
                            <img src="/images/elementos/pantalla_estreita/logo.svg" alt=" Principal" />
                        </span>
                    </a>
                </li>
            
                <li class="">
                    <a href="/ilg/espazos/" class="menu-link">
                        <span class="menu-icon">
                            <img src="/images/elementos/pantalla_estreita/espazos.svg" alt="Espazos" />
                        </span>
                    </a>
                </li>
            
                <li class="">
                    <a href="/ilg/calendario/" class="menu-link">
                        <span class="menu-icon">
                            <img src="/images/elementos/pantalla_estreita/calendario.svg" alt="Calendario" />
                        </span>
                    </a>
                </li>
            
        </ul>
    </nav>
</div>

        </aside>
    </div>

    <script>
    </script>
    
</body>
</html>
